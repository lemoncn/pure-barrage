{"version":3,"sources":["../src/Bullet.ts","../node_modules/object-assign/index.js","../src/Barrage.ts","main.ts"],"names":["getOwnPropertySymbols","Object","hasOwnProperty","prototype","propIsEnumerable","propertyIsEnumerable","toObject","val","undefined","TypeError","shouldUseNative","assign","test1","String","getOwnPropertyNames","test2","i","fromCharCode","order2","map","n","join","test3","split","forEach","letter","keys","err","module","exports","target","source","from","to","symbols","s","arguments","length","key","call"],"mappings":"ACAA;AACA,ACDA;ADEA;AACA,ADHA;ACIA;AAEA;AACA;ADJA,OAAA,CAAA,QAAA,CAAA,EAAiB;ACKjB,IAAIA,qBAAqB,GAAGC,MAAM,CAACD,qBAAnC;AACA,IAAIE,cAAc,GAAGD,MAAM,CAACE,SAAP,CAAiBD,cAAtC;AACA,ADLA,AGLA,IFUIE,ADLJ,AGLA,MHKA,GGLA,GAAA,IFUoB,GAAGH,MAAM,CAACE,CEV9B,CAAA,OFUuB,AEVvB,CFUwCE,AEVxC,gBAAA,CAAA,CAAA,EFUA;ADLA;ACOA,ADPA,AGHA,IAAM,KFUGC,EEVI,CHGb,EGHgB,GFUhB,CAAkBC,AEVE,GFUpB,EAAuB,IEVH,CAAA,SAAA,CAAJ,CAAY;AFW3B,ADLG,AGLA,EAAA,IFUCA,GAAG,EEVK,EAAE,CFUF,IAAR,CEVgB,CAAC,EFUDA,GAAG,GEVT,CAAgB,CFUFC,SAA5B,EAAuC,EEVzB,CAA+B,OAA/B,CADa;AFY1B,ACTF,ACDI,EAAA,KDCJ,CAAA,EDSQ,IAAIC,AEVI,EDChB,ACDkB,CDClB,EAAiB,IDST,CAAc,uDAAd,CAAN;AACA,AEb0B,CAAZ,CAAhB;AAME,OAAO,CAAC,IAAR,CAAa,cAAb;AFSD,ACXD,ACKE,IDLF,KDWQR,EENK,CDLb,ACKc,GFMA,ACXd,CDWeM,GAAD,CAAb,IENa,MDLd,CAAA,OAAA,CAAA,UAAA,CAAA,CAAA,EAA+B;ADY9B,AENG,EAAA,OAAO,CAAC,IAAR,CAAa,cAAb,EAA6B;AAC3B,IAAA,MAAM,EAAE,IADmB;AFQjC,ACbA,AFQI,AGDE,IDPA,ACOA,KFMGG,EDLL,CGDU,EAAE,EDPE,CFQd,CAAY,CERK,CCKY,CHG7B,EAAyB,CCK7B,ECb4B,CDaD,ACbE,MFQzB,EAAiD,OERzB,CAA5B,GFQI,EAAoE;ACMvE,ADLO,AGDF,IAAA,EFMD,EDLO,IAAI,CGDD,EHCI,AGDF,IHCT,EGJyB;AFU/B,ACbF,AFQQ,AGDF,IDPN,AFQQ,AGDF,IFMA,ADLM,CCKLT,ADLM,AGDF,EDPX,ACOa,IFMA,CAACU,ADLN,CGLyB,EHKV,GCKrB,EAAoB,GDLS,CAAC,aAAT,CAAuB,KAAvB,CAAf;ACML,ACdH,AFSQ,AGDF,IHCE,AGDF,IHCM,CAAC,ICKH,AENK,EAAE,CHCT,CAAa,CCKlB,KEX8B,CAKN,EHCnB,GAAyB,GAAzB;ACML,ACfH,AFUQ,IAAA,CCEH,CAKH,EDPU,CAAC,GEVb,IFUQ,CAAa,SAAb,GAAyB,gBAAzB,CAJgE,CAMhE;ACON,ACbA,ACH+B,GAA7B;AHUI,AGHL,CARU,EAQR,IARQ,CHWD,AGXV,UHWoB,CAAC,MAAf,EAAuB;AACnB,MAAA,IAAI,CAAC,OAAL,CAAa,SAAb,IAA0B,wBAA1B;ACMV,ADLO,KAT+D,CAWhE,ECGFC,KAAK,GAAG,IAAIC,MAAJ,CAAW,KAAX,CAAZ,CARG,CAQ6B;;AAChCD,IAAAA,KAAK,CAAC,CAAD,CAAL,GAAW,IAAX;ADHM,QAAI,UAAU,CAAC,SAAf,EAA0B;ACIhC,ACTA,AFMU,MAAA,ECGNX,EDHU,CENd,AFMe,GCGL,CAACa,GCTX,AFMU,CENE,AFMW,MENvB,EAA0B,CFMhB,IAA0B,ECGhC,CAA2BF,GDHW,ECGtC,EAAkC,CAAlC,KDHgD,CCGP,ADHQ,GCGrD,EAAkD,IDHxC;ACIT,ACTC,AFMK,KAd+D,CAgBhE,EERA,IAAI,CDSF,ECTK,GDSZ,CCTC,CADwB,CAExB;ADSD,KAZE,CAcH;ACVE,IAAA,IAAI,CAAC,MAAL,GAAc,YAAY,CAAC;AACzB,AFME,MENF,EFMM,OENG,EAAE,CFMK,CAAC,IENA,CAAC,GFMhB,EAAyB,GENhB,CAAgB,IADF;ADW7B,ACTI,AFMM,MENN,AFMM,ECGNG,EDHU,CAAC,ECGN,GAAG,EAAZ,ACTgB,AFMN,CAAa,CENL,IFMR,CAAmB,QAAnB,GAA8B,UAAU,CAAC,QAAzC;AERmB,AFStB,KETqB,AFV0C,CAqBhE,CERD,MAHuB,CAA1B;ADYF,ACPE,IAAA,IAAI,CDOD,ACPE,IDOEC,CAAC,ACPR,GDOW,ACPE,CDOf,EAAgBA,CAAC,ACPE,CAAC,EDOA,EAApB,EAAwBA,ACPT,CDOU,ACPE,EDO3B,EAA6B,KCPd,CAAsB,WAAnC;ADQDD,ACPC,IAAA,EDODA,ECPK,CAAC,EDOD,CAAC,GCPL,GD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","file":"main.c39d6dcf.js","sourceRoot":"..\\example","sourcesContent":["/**\r\n * 子弹\r\n */\r\nimport './type'; //  数据类型\r\n\r\nclass Bullet {\r\n    private oBullet: HTMLSpanElement;\r\n\r\n    /**\r\n     * @constructor Bullet\r\n     * @param {string} msg 弹幕文字\r\n     * @param {EmitConfig} emitConfig   弹幕文字效果 \r\n     * @param {config} stageConfig 弹幕组件初始化配置\r\n     * \r\n     */\r\n    constructor(msg: string, emitConfig: EmitConfig, stageConfig: config) {\r\n        var that = this;\r\n        that.oBullet = document.createElement(\"div\");\r\n        that.oBullet.innerHTML = msg;\r\n        that.oBullet.className = \"barrage-bullet\";\r\n\r\n        //  着重标记\r\n        if (emitConfig.notice) {\r\n            that.oBullet.className += \" barrage-bullet-notice\";\r\n        }\r\n\r\n        // class拓展\r\n        if (emitConfig.className) {\r\n            that.oBullet.className += \" \" + emitConfig.className;\r\n        }\r\n\r\n        //  字号\r\n        if (emitConfig.fontSize) {\r\n            that.oBullet.style.fontSize = emitConfig.fontSize;\r\n        }\r\n\r\n        //  字色\r\n        if (emitConfig.fontColor) {\r\n            that.oBullet.style.color = emitConfig.fontColor;\r\n        }\r\n\r\n        // 速度\r\n        // 弹幕速度通过时间控制：overTimeBase\r\n        let time = stageConfig.overTimeBase;\r\n        switch (emitConfig.speed) {\r\n            case 'fast':\r\n                time = time * (Math.random() * (1.3 - 0.8) + 0.4);\r\n                break;\r\n            case 'slow':\r\n                time = time * (Math.random() * (1.3 - 0.8) + 1.2);\r\n                break;\r\n            default:\r\n                time = time * (Math.random() * (1.3 - 0.8) + 0.8);\r\n        }\r\n        that.oBullet.style.transitionDuration = time / 1000 + \"s\";\r\n    }\r\n\r\n    /**\r\n     * 获取子弹dom\r\n     * @function get\r\n     * @returns {HTMLSpanElement} \r\n     * \r\n     */\r\n    get(): HTMLSpanElement {\r\n        return this.oBullet;\r\n    }\r\n}\r\n\r\nexport default Bullet;\r\n","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","/**\r\n * 弹幕类\r\n * @author Lemon\r\n */\r\n\r\nimport './type'; //  数据类型\r\nimport Bullet from './Bullet'; //  弹幕子弹\r\nconst objectAssign = require('object-assign');\r\n\r\nclass Barrage {\r\n  private config: config; //  实例配置\r\n  private width: number; // 弹幕舞台宽度\r\n  private height: number; // 弹幕舞台高度\r\n  private lastTop: number; //   最后一个弹幕发射的y坐标\r\n\r\n  /**\r\n   * @constructor Barrage\r\n   * \r\n   * @param {config} config \r\n   * @param {Object} config.container - 弹幕区域的dom对象\r\n   * @param {Number} config.overTimeBase - 弹幕划过的时间基准（弹幕划过所需要的时间，默认5000  即5s）\r\n   */\r\n  constructor(config: config) {\r\n    let that = this;\r\n    // 初始化默认配置\r\n    that.config = objectAssign({\r\n      container: window.document.body,\r\n      overTimeBase: 6000\r\n    }, config);\r\n\r\n    that.width = that.config.container.clientWidth;\r\n    that.height = that.config.container.clientHeight;\r\n    that.lastTop = 0;\r\n\r\n    that.styleInit();\r\n  }\r\n\r\n  /**\r\n   * 样式初始化\r\n   * @function  styleInit\r\n   * @private\r\n   */\r\n  private styleInit() {\r\n    let that = this;\r\n    // 给弹幕容器加class调用\r\n    that.config.container.className += ' fe-plus-barrage';\r\n\r\n    let oHead: HTMLElement = document.getElementsByTagName('head')[0];\r\n    let oStyle: any = document.createElement('style');\r\n    oStyle.type = 'text/css';\r\n    let sCSS = [\r\n      '.fe-plus-barrage{overflow: hidden}',\r\n      '.fe-plus-barrage .barrage-bullet{position: absolute;left: 100%;top: 0px;z-index: 100;white-space: nowrap;color: #fff;line-height: 160%;text-shadow: 1px 1px 0px rgba(0,0,0,.4);transition: transform 3s linear;}',\r\n      '.fe-plus-barrage .barrage-bullet-notice{font-weight: bold;color:red}',\r\n    ].join('');\r\n    if (oStyle.styleSheet) {\r\n      oStyle.styleSheet.cssText = sCSS;\r\n    } else {\r\n      oStyle.innerHTML = sCSS;\r\n    }\r\n    oHead.appendChild(oStyle);\r\n  }\r\n\r\n  /**\r\n   * 发射弹幕\r\n   * @function emit\r\n   * @param {string} msg \r\n   * @param {EmitConfig} [emitConfig] 拓展样式\r\n   * @param {boolean} [emitConfig.notice] 是否是重点弹幕（加大加粗）\r\n   * @param {string} [emitConfig.fontSize] 字号 “12px”\r\n   * @param {string} [emitConfig.fontColor] 字色“#ff0”\r\n   */\r\n  emit(msg: string, emitConfig?: EmitConfig) {\r\n    const that = this;\r\n    const oEmitConfig: EmitConfig = emitConfig || {};\r\n\r\n    //  获取弹幕子弹元素\r\n    const bullet = new Bullet(msg, oEmitConfig, that.config).get();\r\n\r\n    //  render dom，获取其占位尺寸\r\n    that.config.container.appendChild(bullet);\r\n\r\n    let bulletWidth: number = bullet.clientWidth;\r\n    let bulletHeight: number = bullet.clientHeight;\r\n\r\n    //  top值\r\n    // that.lastTop += bulletHeight + Math.random() * 30;\r\n    that.lastTop += bulletHeight + 0;\r\n    if (that.lastTop + bulletHeight > that.height) {\r\n      that.lastTop = 0;\r\n    }\r\n    bullet.style.top = that.lastTop + 'px';\r\n\r\n    // 移出屏幕偏移量\r\n    let moveX: number = that.width + bulletWidth;\r\n\r\n    //  开始单条弹幕\r\n    bullet.style.transform = 'translate3d(' + -moveX + 'px, 0,0)';\r\n\r\n    //  动画结束消除自己\r\n    function _removeBullet() {\r\n      if (bullet.parentNode) {\r\n        bullet.removeEventListener('webkitTransitionEnd', _removeBullet);\r\n        bullet.removeEventListener('transitionend', _removeBullet);\r\n        bullet.parentNode.removeChild(bullet);\r\n      }\r\n    }\r\n    bullet.addEventListener('webkitTransitionEnd', _removeBullet);\r\n    bullet.addEventListener('transitionend', _removeBullet);\r\n  }\r\n\r\n}\r\n\r\nexport default Barrage;\r\n","import Barrage from '../src/Barrage';\r\n\r\nconst barrage = new Barrage({\r\n    container: window.document.getElementById('danmu'),\r\n    overTimeBase: 5000\r\n  });\r\n\r\n\r\n  barrage.emit('中文中文中文中文中文中文');\r\n\r\n\r\n  setInterval(function() {\r\n    barrage.emit('中文中文中文中文中文中文', {\r\n      notice: true, // 加红加粗\r\n      fontSize: '20px',  // 弹幕字号\r\n      fontColor: '#ff0',  // 颜色\r\n      speed: 'fast',  // 速度 fast | norma(default) | slow\r\n      className: 'custom'  // 自定义class\r\n    });\r\n  }, 1000);"]}